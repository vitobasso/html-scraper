home-url: 'https://www.spareroom.co.uk'
list-page:
  url-path: '/flatshare/${search-term}/page${page-number}'
  item-selector: '.listing-result'
  attributes:
    - name: 'name'
      selector: 'h1'
      extractor: 'content'
    - name: 'image'
      selector: 'img'
      extractor: 'attrs src'
      regex:
        find: '^\/\/(.*)'
        replace: 'https://${1}'
    - name: 'url'
      selector: 'a'
      extractor: 'attrs href'
    - name: 'price'
      selector: '.listingPrice'
      extractor: 'content'
    - name: 'region'
      selector: '.listingLocation'
      extractor: 'content'
    - name: 'rooms'
      selector: '.shortDescription'
      extractor: 'content'
detail-page:
  url-path: '${url}'
  attributes:
    - name: 'station-distance'
      selector: '.key-features__station-distance'
      extractor: 'content'
    - name: 'latlng'
      selector: 'script'
      extractor: 'content'
      regex:
        find: '(?s)lat:\s*''([0-9\.\-]+).*lon:\s*''([0-9\.\-]+)'
        replace: '${1},${2}'
    - name: 'available'
      selector: '.feature--availability dt:contains("Available") + dd'
      extractor: 'content'
    - name: 'min-term'
      selector: '.feature--availability dt:contains("Minimum term") + dd'
      extractor: 'content'
    - name: 'max-term'
      selector: '.feature--availability dt:contains("Maximum term") + dd'
      extractor: 'content'
    - name: 'num-flatmates'
      selector: '.feature--current-household dt:contains("#\s+flatmates") + dd'
      extractor: 'content'
    - name: 'num-rooms'
      selector: '.feature--current-household dt:contains("Total # rooms") + dd'
      extractor: 'content'
    - name: 'pets-ok?'
      selector: '.feature--household-preferences dt:contains("Pets OK") + dd > span'
      extractor: 'content'
    - name: 'couple-ok?'
      selector: '.feature--household-preferences dt:contains("Couples OK") + dd > span'
      extractor: 'content'

