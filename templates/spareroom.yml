list-page:
  url: 'https://www.spareroom.co.uk/flatshare/${search-term}/page${page-number}'
  item-select: '.listing-result'
  properties:
    - name: 'name'
      select: 'h1'
    - name: 'image'
      select: 'img'
      extract: 'attrs src'
      regex:
        find: '^\/\/(.*)'
        replace: 'https://${1}'
    - name: 'url'
      select: 'a'
      extract: 'attrs href'
    - name: 'price'
      select: '.listingPrice'
    - name: 'region'
      select: '.listingLocation'
    - name: 'rooms'
      select: '.shortDescription'
detail-page:
  url: 'https://www.spareroom.co.uk${url}'
  properties:
    - name: 'station-distance'
      select: '.key-features__station-distance'
    - name: 'latlng'
      select: 'script'
      regex:
        find: '(?s)lat:\s*''([0-9\.\-]+).*lon:\s*''([0-9\.\-]+)'
        replace: '${1},${2}'
    - name: 'available'
      select: '.feature--availability dt:contains("Available") + dd'
    - name: 'min-term'
      select: '.feature--availability dt:contains("Minimum term") + dd'
    - name: 'max-term'
      select: '.feature--availability dt:contains("Maximum term") + dd'
    - name: 'num-flatmates'
      select: '.feature--current-household dt:contains("#\s+flatmates") + dd'
    - name: 'num-rooms'
      select: '.feature--current-household dt:contains("Total # rooms") + dd'
    - name: 'pets-ok?'
      select: '.feature--household-preferences dt:contains("Pets OK") + dd > span'
    - name: 'couple-ok?'
      select: '.feature--household-preferences dt:contains("Couples OK") + dd > span'

